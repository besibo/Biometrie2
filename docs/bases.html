<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Travaux Pratiques de Biométrie 2</title>
  <meta name="description" content="Ce livre est un document permettant de prendre en main les logiciels R et RStudio afin de réaliser des représentations graphiques et des statistiques descriptives simples dans le cadre des travaux pratiques de Biométrie 2.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Travaux Pratiques de Biométrie 2" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://besibo.github.io/Biometrie2/" />
  
  <meta property="og:description" content="Ce livre est un document permettant de prendre en main les logiciels R et RStudio afin de réaliser des représentations graphiques et des statistiques descriptives simples dans le cadre des travaux pratiques de Biométrie 2." />
  <meta name="github-repo" content="besibo/Biometrie2" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Travaux Pratiques de Biométrie 2" />
  
  <meta name="twitter:description" content="Ce livre est un document permettant de prendre en main les logiciels R et RStudio afin de réaliser des représentations graphiques et des statistiques descriptives simples dans le cadre des travaux pratiques de Biométrie 2." />
  

<meta name="author" content="Benoît Simon-Bouhet">


<meta name="date" content="2018-09-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="dataset.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #ffffff; color: #1f1c1b; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #ffffff; color: #a0a0a0; border-right: 1px solid #a0a0a0; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #1f1c1b; background-color: #ffffff; }
code > span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code > span.dt { color: #0057ae; } /* DataType */
code > span.dv { color: #b08000; } /* DecVal */
code > span.bn { color: #b08000; } /* BaseN */
code > span.fl { color: #b08000; } /* Float */
code > span.cn { color: #aa5500; } /* Constant */
code > span.ch { color: #924c9d; } /* Char */
code > span.sc { color: #3daee9; } /* SpecialChar */
code > span.st { color: #bf0303; } /* String */
code > span.vs { color: #bf0303; } /* VerbatimString */
code > span.ss { color: #ff5500; } /* SpecialString */
code > span.im { color: #ff5500; } /* Import */
code > span.co { color: #898887; } /* Comment */
code > span.do { color: #607880; } /* Documentation */
code > span.an { color: #ca60ca; } /* Annotation */
code > span.cv { color: #0095ff; } /* CommentVar */
code > span.ot { color: #006e28; } /* Other */
code > span.fu { color: #644a9b; } /* Function */
code > span.va { color: #0057ae; } /* Variable */
code > span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code > span.op { color: #1f1c1b; } /* Operator */
code > span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code > span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code > span.pp { color: #006e28; } /* Preprocessor */
code > span.at { color: #0057ae; } /* Attribute */
code > span.re { color: #0057ae; } /* RegionMarker */
code > span.in { color: #b08000; } /* Information */
code > span.wa { color: #bf0303; } /* Warning */
code > span.al { color: #bf0303; font-weight: bold; } /* Alert */
code > span.er { color: #bf0303; text-decoration: underline; } /* Error */
code > span. { color: #1f1c1b; } /* Normal */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">TP de Biométrie 2</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objectifs"><i class="fa fa-check"></i><b>1.1</b> Objectifs</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#organisation"><i class="fa fa-check"></i><b>1.2</b> Organisation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="bases.html"><a href="bases.html"><i class="fa fa-check"></i><b>2</b> R et RStudio : les bases</a><ul>
<li class="chapter" data-level="2.1" data-path="bases.html"><a href="bases.html#que-sont-r-et-rstudio"><i class="fa fa-check"></i><b>2.1</b> Que sont R et RStudio</a><ul>
<li class="chapter" data-level="2.1.1" data-path="bases.html"><a href="bases.html#installation-de-r-et-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> Installation de R et RStudio</a></li>
<li class="chapter" data-level="2.1.2" data-path="bases.html"><a href="bases.html#utiliser-r-depuis-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Utiliser R depuis RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="bases.html"><a href="bases.html#comment-executer-du-code-r"><i class="fa fa-check"></i><b>2.2</b> Comment exécuter du code R ?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="bases.html"><a href="bases.html#la-console"><i class="fa fa-check"></i><b>2.2.1</b> La console</a></li>
<li class="chapter" data-level="2.2.2" data-path="bases.html"><a href="bases.html#le-repertoire-de-travail"><i class="fa fa-check"></i><b>2.2.2</b> Le répertoire de travail</a></li>
<li class="chapter" data-level="2.2.3" data-path="bases.html"><a href="bases.html#les-scripts"><i class="fa fa-check"></i><b>2.2.3</b> Les scripts</a></li>
<li class="chapter" data-level="2.2.4" data-path="bases.html"><a href="bases.html#concepts-de-base-en-programmation-et-terminologie"><i class="fa fa-check"></i><b>2.2.4</b> Concepts de base en programmation et terminologie</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="bases.html"><a href="bases.html#packages"><i class="fa fa-check"></i><b>2.3</b> Les packages additionels</a><ul>
<li class="chapter" data-level="2.3.1" data-path="bases.html"><a href="bases.html#installation-dun-package"><i class="fa fa-check"></i><b>2.3.1</b> Installation d’un package</a></li>
<li class="chapter" data-level="2.3.2" data-path="bases.html"><a href="bases.html#charger-un-package-en-memoire"><i class="fa fa-check"></i><b>2.3.2</b> Charger un package en mémoire</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="bases.html"><a href="bases.html#exercices"><i class="fa fa-check"></i><b>2.4</b> Exercices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataset.html"><a href="dataset.html"><i class="fa fa-check"></i><b>3</b> Explorez votre premier jeu de données</a></li>
<li class="chapter" data-level="4" data-path="viz.html"><a href="viz.html"><i class="fa fa-check"></i><b>4</b> Visualiser des données avec <code>ggplot2</code></a></li>
<li class="chapter" data-level="5" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>5</b> (Ar)ranger des données avec <code>tidyr</code></a></li>
<li class="chapter" data-level="6" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>6</b> Tripatouiller les données avec <code>dplyr</code></a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>Références</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publié avec bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Travaux Pratiques de Biométrie 2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bases" class="section level1">
<h1><span class="header-section-number">2</span> R et RStudio : les bases</h1>
<p>Avant de commencer à explorer des données dans R, il y a plusieurs concepts de clé qu’il faut comprendre premier lieu :</p>
<ol style="list-style-type: decimal">
<li>Que sont R et RStudio ?</li>
<li>Comment s’y prend-on pour coder dans R ?</li>
<li>Que sont les “packages” ?</li>
</ol>
<p>Si vous pensez être déjà à l’aise avec ces concepts, lisez attentivement ce chapitre et faites les exercices demandés. Cela vous rafraîchira probablement la mémoire, et il n’est pas impossible que vous appreniez une chose ou deux au passage. Une bonne maîtrise des éléments présentés dans ce chapitre est un effet nécessaire pour aborder sereinement la section <a href="dataset.html#dataset">3</a> ci-dessous, qui présente quelques jeux de données que nous explorerons en détail au cours de ces séances de TP qui viennent.</p>
<p>Ce chapitre est en grande partie basé sur les 3 ressources suivantes que je vous encourage à consulter si vous souhaitez obtenir plus de détails :</p>
<ol style="list-style-type: decimal">
<li>L’ouvrage intitulé <a href="https://moderndive.com/index.html">ModernDive</a>, de Chester Ismay et Albert Y. Kim. Une bonne partie de cet ouvrage est très largement inspirée de cet ouvrage. C’est en anglais, mais c’est un très bon texte d’introduction aux statistiques sous R et RStudio.</li>
<li>L’ouvrage intitulé <a href="https://ismayc.github.io/rbasics-book/">Getting used to R, RStudio, and R Markdown</a> de Chester Ismay, comprend des podcasts (en anglais toujours) que vous pouvez suivre en apprenant.</li>
<li>Les tutoriels en ligne de DataCamp. DataCamp est une plateforme de e-learning accessible depuis n’importe quel navigateur internet dont la priorité est l’enseignement des “data sciences”. Leurs tutoriels vous aideront à apprendre certains des concepts de développés dans ce livre. Avant d’aller plus loin, rendez-vous sur <a href="https://www.datacamp.com/">le site de DataCamp</a> et créez vous un compte gratuit.</li>
</ol>
<hr />
<div id="que-sont-r-et-rstudio" class="section level2">
<h2><span class="header-section-number">2.1</span> Que sont R et RStudio</h2>
<p>Pour l’ensemble des TP de biométrie 2, j’attends de vous que vous utilisez R <em>via</em> RStudio. Les utilisateurs novices confondent souvent les deux. Pour tenter une analogie simple :</p>
<ul>
<li>R est le moteur d’une voiture</li>
<li>RStudio est l’habitacle, le tableau de bord, les pédales</li>
</ul>
<p>Si vous n’avez pas de moteur, vous n’irez nulle part. En revanche, un moteur sans tableau de bord est difficile à manœuvrer. Il est en effet beaucoup plus simple de faire avancer une voiture depuis l’habitacle, plutôt qu’en actionnant à la main les cables et leviers du moteur.</p>
<p>En l’occurence, R est un langage de programmation capable de produire des graphiques et de réaliser des analyses statistiques, des plus simples au plus complexes. RStudio est un “emballage” qui rend l’utilisation de R plus aisée. RStudio est ce qu’on appelle un IDE : Itegrated Development Environment. On peut utiliser R sans RStudio, mais c’est nettement plus compliqué, nettement moins pratique.</p>
<div id="installation-de-r-et-rstudio" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Installation de R et RStudio</h3>
<p><em>Si vous travaillez exclusivement sur les ordinateurs de l’Université, vous pouvez passer cette section. Si vous souhaitez utiliser R et RStudio sur votre ordinateur personnel, alors suivez le guide !</em></p>
<p>Avant tout, vous devez télécharger et installer R et RStudio, dans cet ordre :</p>
<ol style="list-style-type: decimal">
<li><a href="https://cran.r-project.org">Téléchargez et installez R</a></li>
</ol>
<ul>
<li>Note : vous devez installer ce logiciel en premier</li>
<li>Cliquez sur le lien de telechargement qui correspond à votre système d’exploitation, puis, sur “base”, et suivez les instructions</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><a href="https://www.rstudio.com/products/RStudio/#Desktop">Téléchargez et installez R</a></li>
</ol>
<ul>
<li>Cliquez sur “Download RStudio Desktop”</li>
<li>Choisissez la version gratuite et cliquez sur le lien de télechargement qui correspond à votre système d’exploitation.</li>
</ul>
<p>Pour plus de détails sur la façon de procéder, vous pouvez consulter <a href="https://campus.datacamp.com/courses/working-with-the-rstudio-ide-part-1/orientation?ex=3">cette vidéo</a> sur le site de DataCamp. Il est possible que vous deviez créer un compte (gratuit) pour accéder à la vidéo.</p>
</div>
<div id="utiliser-r-depuis-rstudio" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Utiliser R depuis RStudio</h3>
<p>Puisqu’il est beaucoup plus facile d’utiliser Rstudio pour interagir avec R, nous utiliserons exclusivement l’interface de RStudio. Après l’installation des 2 logiciels, vous disposez de 2 nouveaux logiciels sur votre ordinateur. RStudio ne peut fonctionner sans R, mais nous travaillerons exclusivement dans RStudio :</p>
<table>
<thead>
<tr class="header">
<th align="center">R: Ne pas ouvrir ceci</th>
<th align="center">RStudio: ouvrir ça !</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><img src="https://cran.r-project.org/Rlogo.svg" alt="Drawing" style="height: 100px;"/></td>
<td align="center"><img src="https://www.rstudio.com/wp-content/uploads/2014/06/RStudio-Ball.png" alt="Drawing" style="height: 100px;"/></td>
</tr>
</tbody>
</table>
<p>À l’université, vous trouverez RStudio dans le menu Windows. Quand vous ouvrez RStudio pour la première fois, vous devriez obtenir une fenêtre qui ressemble à ceci :</p>
<div class="figure">
<img src="images/rstudio.png" />

</div>
<p>Regardez <a href="https://campus.datacamp.com/courses/working-with-the-rstudio-ide-part-1/orientation?ex=5">cette vidéo DataCamp</a> pour découvrir les différents panneaux de l’application, en particulier la Console dans laquelle nous executerons très bientôt du code R</p>
<hr />
</div>
</div>
<div id="comment-executer-du-code-r" class="section level2">
<h2><span class="header-section-number">2.2</span> Comment exécuter du code R ?</h2>
<p>Maintenant que vous avez configuré R et RStudio, vous vous demandez probablement “OK. Maintenant, comment utiliser R ?” La première chose à noter est que, contrairement à d’autres logiciels comme Excel, STATA ou SAS qui fournissent des interfaces où tout se fait en cliquant avec sa souris, R est un langage interprété, ce qui signifie que vous devez entrer des commandes R écrites en code R. C’est-à-dire que vous devez <strong>programmer</strong> en R (j’utilise les termes “coder” et “programmer” de manière interchangeable dans ce livre).</p>
<p>Il ne soit pas nécessaire d’être un programmeur pour utiliser R. Néamnoins il existe un ensemble de concepts de programmation de base que les utilisateurs R doivent comprendre. Par conséquent, bien que ce livre ne soit pas un livre sur la programmation, vous en apprendrez juste assez sur ces concepts de programmation de base nécessaires pour explorer et analyser efficacement des données.</p>
<div id="la-console" class="section level3">
<h3><span class="header-section-number">2.2.1</span> La console</h3>
<p>La façon la plus simle d’interagir avec RStudio (mais pas du tout la meilleure !) consiste à taper directement des commandes que R pourra comprendre dans la Console.</p>
<p>Cliquez dans la console (après le symbole <code>&gt;</code>) et tapez ceci, sans oublier de valider en tapant sur la touche <code>Entrée</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">8</span></code></pre></div>
<pre><code>[1] 11</code></pre>
<p>Félicitations, vous venez de taper votre première instruction R : vous savez maintenant faire une addition !</p>
</div>
<div id="le-repertoire-de-travail" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Le répertoire de travail</h3>
<p>La première commande que vous devriez connaître quand vous travaillez dans R ou RStudio est la suivante :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()</code></pre></div>
<p>Si vous tapez cette commande dans la console, RStudio doit vous afficher un emplacement sur votre ordinateur. Cet emplacement est appelé “Répertoire de travail”, ou “Working Directory” en anglais (<code>getwd()</code> est l’abbréviation de “Get Working Directory”).</p>
<p>Ce répertoire de travail est important : c’est là que seront stockés les tableaux et graphiques que vous déciderez de sauvegarder. C’est là aussi que vous sauvegarderez vos scripts (voir plus bas) qui vous permettront de garder la trace de votre travail et de le reprendre là où vous l’aviez laissé la dernière fois. Enfin, lorsque vous souhaiterez importer des tableaux de données contenus dans des fichiers externes (par exemple, des fichiers Excel), c’est également dans ce répertoire que R tentera de trouver vos données.</p>
<p>Avant d’aller plus loin je vous conseille donc vivement de :</p>
<ol style="list-style-type: decimal">
<li>Créer un nouveau dossier intitulé “Biometrie” sur votre espace personnel (généralement, sur le disque “W:” des ordinateurs de l’Université)</li>
<li>Indiquez à RStudio que vous souhaitez travailler dans ce nouveau répertoire de travail. Pour cela vous avez 3 solutions au choix :
<ol style="list-style-type: decimal">
<li>Dans RStudio, cliquez dans le menu “Session &gt; Set Working Directory &gt; Choose Directory…” puis naviguez jusqu’au dossier que vous venez de créer</li>
<li>Dans le panneau “Files”, naviguez jusqu’au dossier “Biometrie” que vous venez de créer, puis cliquez sur le bouton “More &gt; Set As Working Directory”</li>
<li>En ligne de commande, dans la console, utilisez la fonction <code>setwd()</code> pour spécifier le chemin de votre nouveau dossier, par exemple :</li>
</ol></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Attention à bien respecter les majuscules et à utiliser les</span>
<span class="co"># guillemets.</span>
<span class="kw">setwd</span>(<span class="st">&quot;W:/Biometrie&quot;</span>)</code></pre></div>
<p>Il ne vous reste plus qu’à vérifier que le changement a bien été pris en compte en tapant à nouveau <code>getwd()</code> dans la console. Attention, vous devez vous assurer d’être dans le bon répertoire de travil <strong>à chaque nouvelle session</strong> !</p>
</div>
<div id="les-scripts" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Les scripts</h3>
<p>Taper du code directement dans la console est probablement la pire façon de travailler dans RStudio. Cela est parfois utile pour faire un rapide calcul, ou pour vérifier qu’une commande fonctionne correctement. Mais la plupart du temps, vous devriez taper vos commandes dans un script.</p>
<p>Un script est un fichier au format “texte brut” (cela signifie qu’il n’y a pas de mise en forme et que ce fichier peut-être ouvert par n’importe quel éditeur de texte, y compris les plus simples comme le bloc notes de Windows), dans lequel vous pouvez taper :</p>
<ol style="list-style-type: decimal">
<li>des instructions qui seront comprises par R comme si vous les tapiez directement dans la console</li>
<li>des lignes de commentaires, qui doivent obligatoirement commencer par le symbole <code>#</code>.</li>
</ol>
<p>Les avantages de travailler dans un script sont nombreux :</p>
<ol style="list-style-type: decimal">
<li>Vous pouvez sauvegarder votre script à tout moment (vous devriez prendre l’habitude de le sauvegarder très régulièrement). Vous gardez ainsi la trace de toutes les commandes que vous avez tapées.</li>
<li>Vous pouvez aisément partager votre script pour collaborer avec vos collègues de promo et enseignants.</li>
<li>Vous pouvez documenter votre démarche et les différentes étapes de vos analyses. Vous devez ajouter autant de commentaires que possible. Cela permettra à vos collaborateurs de comprendre ce que vous avez fait. Et cela vous permettra de comprendre ce que vous avez fait il y a 6 mois quand vous vous re-plongerez dans vos analyses dans quelques temps. Si votre démarche vous paraît cohérente maintenant, il n’est en effet pas garanti que vous rappellerez de chaque détail dans 6 mois ou 6 ans.</li>
<li>Un script bien structuré et clair permet de rendre vos analyses répétables. Si vous passer 15 heures à analyser un tableau de données précis, il vous suffira de quelques secondes pour analyser un nouveau jeu de données similaires : vous n’aurez que quelques lignes à modifier dans votre script original pour l’appliquer à de nouvelles données.</li>
</ol>
<p>Vous pouvez créer un script en cliquant dans le menu “File &gt; New File &gt; R Script”. Un nouveau panneau s’ouvre dans l’application. Pensez à sauvegarder immédiatement votre nouveau script. Il faut pour cela lui donner un nom. Vous noterez que par défaut, RStudio propose d’enregistrer votre script dans votre répertoire de travail.</p>
<p>À partir de maintenant, vous ne devriez plus taper de commande directement dans la console. Tapez systématiquement vos commandes dans un script et sauvegardez-le régulièrement.</p>
<p>Pour exécuter les commandes du script dans la console, il suffit de placer le curseur sur la ligne contenant la commande et de presser les touches <code>ctrl + enter</code> (ou <code>command + enter</code> sous macOS). Si un message d’erreur s’affiche dans la console, c’est que votre instruction était erronée. Modifiez la directement dans votre script et pressez à nouveau les touches <code>ctrl + enter</code> (ou <code>command + enter</code> sous macOS) pour tenter à nouveau votre chance. Idéalement, votre script ne devrait contenir que des commandes qui fonctionnent et des commentaires expliquant à quoi servent ces commandes.</p>
<p>À la fin de chaque séance de TEA, vous devrez déposer sur l’ENT le script que vous avez créé durant la séance. Ce script devra porter votre nom de famille et se terminer par l’extension <code>.R</code>. Ainsi, si Jean-Claude Van Damme faisait des statistiques, il devrait déposer sur l’ENT un fichier intitulé <code>VanDamme.R</code> à la fin de chaque séance de TEA.</p>
<p>Ci-dessous, un exemple de script</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Penser à installer le package ggplot2 si besoin</span>
<span class="co"># install.packages(&#39;ggplot2&#39;)</span>

<span class="co"># Chargement du package</span>
<span class="kw">library</span>(ggplot2)

<span class="co"># Mise en méoire des données de qualité de l&#39;air à New-York</span>
<span class="co"># de mai à septembre 1973</span>
<span class="kw">data</span>(airquality)

<span class="co"># Affichage des premières lignes du tableau de données</span>
<span class="kw">head</span>(airquality)

<span class="co"># Quelle est la structure de ce tableau ?</span>
<span class="kw">str</span>(airquality)

<span class="co"># Réalisation d&#39;un graphique présentant la relation entre la</span>
<span class="co"># concentration en ozone atmosphérique en ppb et la</span>
<span class="co"># température en degrés Farenheit</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> airquality, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Temp, <span class="dt">y =</span> Ozone)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>)

<span class="co"># On constate une augmentation importante de la concentration</span>
<span class="co"># d&#39;ozone pour des températures supérieures à 75ºF</span></code></pre></div>
<p>Même si vous ne comprenez pas encore les commandes qui figurent dans ce script (ça viendra !), voici ce que vous devez en retenir :</p>
<ol style="list-style-type: decimal">
<li>Le script contient plus de lignes de commentaires que de commandes R</li>
<li>Chaque étape de l’analyse est décrite en détail</li>
<li>On peut ajouter des commentaires afin de décrire les résultats</li>
<li>Seules les commandes pertinentes et qui fonctionnent ont été conservées dans ce script</li>
<li>Chaque ligne de commentaire commence par <code>#</code>. Il est ainsi possible de conserver certaines commandes R dans le script, “pour mémoire”, sans pour autant qu’elle ne soient exécutées. C’est le cas pour la ligne <code># install.packages(&quot;ggplot2&quot;)</code>.</li>
</ol>
<p>Si j’éxécute ce script dans la console de RStudio (en sélectionnant toutes les lignes et en pressant les touches <code>ctrl+enter</code> ou <code>command+enter</code> sous macOS), voilà ce qui est produit :</p>
<pre><code>  Ozone Solar.R Wind Temp Month Day
1    41     190  7.4   67     5   1
2    36     118  8.0   72     5   2
3    12     149 12.6   74     5   3
4    18     313 11.5   62     5   4
5    NA      NA 14.3   56     5   5
6    28      NA 14.9   66     5   6</code></pre>
<pre><code>&#39;data.frame&#39;:   153 obs. of  6 variables:
 $ Ozone  : int  41 36 12 18 NA 28 23 19 8 NA ...
 $ Solar.R: int  190 118 149 313 NA NA 299 99 19 194 ...
 $ Wind   : num  7.4 8 12.6 11.5 14.3 14.9 8.6 13.8 20.1 8.6 ...
 $ Temp   : int  67 72 74 62 56 66 65 59 61 69 ...
 $ Month  : int  5 5 5 5 5 5 5 5 5 5 ...
 $ Day    : int  1 2 3 4 5 6 7 8 9 10 ...</code></pre>
<p><img src="figure/unnamed-chunk-5-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="concepts-de-base-en-programmation-et-terminologie" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Concepts de base en programmation et terminologie</h3>
<p>Pour vous présenter les concepts de base et la terminologie de la programmation dont nous aurons besoin dans R, vous allez suivre les tutoriels en ligne suivants, sur le site de DataCamp. Pour chacun des tutoriels, j’indique une liste des concepts de programmation couverts. Notez que dans ce livre, nous utiliserons une police différente pour distinguer le texte normal et les <code>commandes-informatiques</code>.</p>
<p>Il est important de noter que, bien que ces tutoriels sont d’excellentes introductions, une seule lecture est insuffisante pour un apprentissage en profondeur et une rétention à long terme. Les outils ultimes pour l’apprentissage et la rétention à long terme sont “l’apprentissage par la pratique” et “la répétition”. Outre les exercices demandés dans DataCamp, que vous devez effectuer directement dans votre navigateur, je vous encourage donc à multiplier les essais, directement dans la console de RStudio pour vous assurer que vous avez bien compris chaque partie.</p>
<div id="objets-types-vecteurs-facteurs-et-tableaux-de-donnees" class="section level4">
<h4><span class="header-section-number">2.2.4.1</span> Objets, types, vecteurs, facteurs et tableaux de données</h4>
<p>Dans <a href="https://www.datacamp.com/community/open-courses/introduction-a-r">le cours d’introduction à R</a> sur DataCamp, suivez les chapitres suivants. Au fur et à mesure de votre travail, notez les termes importants et ce à quoi ils font référence.</p>
<ul>
<li><a href="https://campus.datacamp.com/courses/introduction-a-r/chapitre-1-introduction?ex=1">Chapitre 1 : introduction</a>
<ul>
<li>La console : l’endroit où vous tapez des commandes</li>
<li>Les objets : où les valeurs sont stockées, comment assigner des valeurs à des objets</li>
<li>Les types de données : entiers, doubles/numériques, charactères et logiques</li>
</ul></li>
<li><a href="https://campus.datacamp.com/courses/introduction-a-r/chapitre-2-les-vecteurs?ex=1">Chapitre 2 : vecteurs</a>
<ul>
<li>Les vecteurs : des collections de valeurs du même type.</li>
</ul></li>
<li><a href="https://campus.datacamp.com/courses/introduction-a-r/chapitre-4-facteurs?ex=1">Chapitre 4 : les facteurs</a>
<ul>
<li>Des données catégorielles (et non pas <em>numériques</em>) représentés dans R sous forme de <code>factor</code>s.</li>
</ul></li>
<li><a href="https://campus.datacamp.com/courses/introduction-a-r/chapitre-5-les-jeux-de-donnees?ex=1">Chapitre 5 : les jeux de données ou <code>data.frame</code></a>
<ul>
<li>Les <code>data.frame</code>s sont similaires aux feuilles de calcul rectangulaires que l’on peut produire dans un tableur. Dans R, ce sont des objets rectangulaires (des tableaux !) contenant des jeux de jeux de données : les lignes correspondent aux observations et les colonnes aux variables décrivant les observations. La plupart du temps, c’es le format de données que nous utiliserons. Plus de détails dans la partie <a href="dataset.html#dataset">3</a>.</li>
</ul></li>
</ul>
<p>Avant de passer à la suite, il nous reste 2 grandes notions à découvrir dans le domaine du code et de la syntaxe afin de pouvoir travailler efficacement dans R : les opérateurs de comparaison d’une part, et les fonctions d’autre part.</p>
</div>
<div id="operateurs-de-comparaison" class="section level4">
<h4><span class="header-section-number">2.2.4.2</span> Opérateurs de comparaison</h4>
<p>Comme leur nom l’indique, ils permettent de comparer des valeurs ou des objets. Les principaux opérateurs de comparaison sont :</p>
<ul>
<li><code>==</code> : égale à</li>
<li><code>!=</code> : différent de</li>
<li><code>&gt;</code> : supérieur à</li>
<li><code>&lt;</code> : inférieur à</li>
<li><code>&gt;=</code> : supérieur ou égal à</li>
<li><code>&lt;=</code> : inférieur ou égal à</li>
</ul>
<p>Ainsi, on peut tester si 3 est égal à 5 :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">==</span><span class="st"> </span><span class="dv">5</span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<p>La réponse est bien entendu <code>FALSE</code>. Est-ce que 3 est inférieur à 5 ?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>La réponse est maintenant <code>TRUE</code>. Lorsque l’on utilise un opérateur de comparaison, la réponse est toujours soit vrai (<code>TRUE</code>), soit faux (<code>FALSE</code>).</p>
<p>Il est aussi possible de comparer des chaînes de charactères :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;Bonjour&quot;</span> <span class="op">==</span><span class="st"> &quot;Au revoir&quot;</span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;Bonjour&quot;</span> <span class="op">&gt;=</span><span class="st"> &quot;Au revoir&quot;</span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Manifestement, “Bonjour” est supérieur ou égal à “Au revoir”. En fait, R utilise l’ordre alphabétique pour comparer les chaînes de caractères. Puisque dans l’alphabet, le “B” de “Bonjour” arrive après le “A” de “Au revoir”, pour R, “Bonjour” est bien supérieur à “Au revoir”.</p>
<p>Il est également possible d’utiliser ces opérateurs pour comparer un chiffre et un vecteur :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles_pop1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">112</span>, <span class="dv">28</span>, <span class="dv">86</span>, <span class="dv">14</span>, <span class="dv">154</span>, <span class="dv">73</span>, <span class="dv">63</span>, <span class="dv">48</span>)
tailles_pop1 <span class="op">&gt;</span><span class="st"> </span><span class="dv">80</span></code></pre></div>
<pre><code>[1]  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<p>Ici, l’opérateur nous permet d’identifier quels éléments du vecteur <code>taille_pop1</code> sont supérieurs à 80. Il s’agit des éléments placés en première, troisième et cinquième position.</p>
<p>Il est aussi possible de comparer 2 vecteurs qui contiennent le même nombre d’éléments :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles_pop2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">114</span>, <span class="dv">27</span>, <span class="dv">38</span>, <span class="dv">91</span>, <span class="dv">54</span>, <span class="dv">83</span>, <span class="dv">33</span>, <span class="dv">68</span>)
tailles_pop1 <span class="op">&gt;</span><span class="st"> </span>tailles_pop2</code></pre></div>
<pre><code>[1] FALSE  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<p>Les comparaisons sont ici faites élément par élément. Ainsi, les observations 2, 3, 5 et 7 du vecteur <code>tailles_pop1</code> sont supérieures aux observations 2, 3, 5 et 7 du vecteur <code>tailles_pop2</code> respectivement.</p>
<p>Ces vecteurs de vrais/faux sont très utiles car ils peuvent permettre de compter le nombre d’éléments répondant à une certains condition :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(tailles_pop1 <span class="op">&gt;</span><span class="st"> </span>tailles_pop2)</code></pre></div>
<pre><code>[1] 4</code></pre>
<p>Lorsque l’on effectue une opération arithmétique (comme le calcul d’une somme ou d’une moyenne) sur un vecteur de vrais/faux, les <code>TRUE</code> sont remplacés par <code>1</code> et les <code>FALSE</code> par <code>0</code>. La somme nous indique donc le nombre de vrais dans un vecteur de vrais/faux, et la moyenne nous indique la proportion de vrais :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(tailles_pop1 <span class="op">&gt;</span><span class="st"> </span>tailles_pop2)</code></pre></div>
<pre><code>[1] 0.5</code></pre>
<p><strong>Note</strong> : Attention, si les vecteurs comparés n’ont pas la même taille, un message d’avertissement est affiché :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles_pop3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">43</span>, <span class="dv">56</span>, <span class="dv">92</span>)
tailles_pop1</code></pre></div>
<pre><code>[1] 112  28  86  14 154  73  63  48</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles_pop3</code></pre></div>
<pre><code>[1] 43 56 92</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles_pop3 <span class="op">&gt;</span><span class="st"> </span>tailles_pop1</code></pre></div>
<pre><code>Warning in tailles_pop3 &gt; tailles_pop1: la taille d&#39;un objet
plus long n&#39;est pas multiple de la taille d&#39;un objet plus
court</code></pre>
<pre><code>[1] FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<p>Dans un cas comme celui là, R va <em>recycler</em> l’objet le plus court, ici <code>tailles_pop3</code> pour qu’une comparaison puisse être faite avec chaque élément de l’objet le plus long (ici, <code>tailles_pop1</code>). Ainsi, 43 est comparé à 112, 56 est comparé à 28 et 92 est comparé à 86. Puisque <code>tailles_pop3</code> ne contient plus d’éléments, ils sont recyclés, dans le même ordre : 43 est comparé à 14, 56 est comparé à 154, et ainsi de suite jusqu’à ce que tous les éléments de <code>tailles_pop1</code> aient été passés en revue.</p>
<p>Ce type de recyclage est très risqué car il est difficile de savoir ce qui a été comparé avec quoi. En travaillant avec des tableaux plutôt qu’avec des vecteurs, le problème est généralement évité puisque toutes les colonnes d’un <code>data.frame</code> contiennent le même nombre d’éléments.</p>
<p>Dernière chose concernant les opérateurs de comparaison : la question des données manquantes. Dans R les données manquantes sont symbolisées par cette notation : <code>NA</code>, abréviation de “Not Available”. Le symbole <code>NaN</code> est parfois aussi observé lorsque des opérations ont conduit à des indéterminations. Mais c’est plus rare et la plupart du temps, les <code>NaN</code>s peuvent être traités comme les <code>NA</code>s. L’un des problèmes des données manquantes, est qu’il est nécessaire de prendre des précautions pour réaliser des comparaison les impliquants :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></code></pre></div>
<pre><code>[1] NA</code></pre>
<p>On s’attend logiquement à ce que 3 ne soit pas considéré comme égal à <code>NA</code>, et donc, on s’attend à obtenir <code>FALSE</code>. Pourtant, le résultat est <code>NA</code>. La comparaison d’un élément quelconque à une donnée manquante fournit toujours une donnée manquante : la comparaison ne peut pas se faire, R n’a donc rien à retourner. C’est également le cas aussi lorsque l’on compare deux valeurs manquantes :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></code></pre></div>
<pre><code>[1] NA</code></pre>
<p>C’est pourtant assez logique. Imaginons que j’ignore l’âge de Pierre et l’âge de Marie. Il n’y a aucune raison pour que leur âge soit le même, mais il est tout à fait possible qu’il le soit. C’est impossible à déterminer :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age_Pierre &lt;-<span class="st"> </span><span class="ot">NA</span>
age_Marie &lt;-<span class="st"> </span><span class="ot">NA</span>
age_Pierre <span class="op">==</span><span class="st"> </span>age_Marie</code></pre></div>
<pre><code>[1] NA</code></pre>
<p>Mais alors comment faire pour savoir si une valeur est manquante puisqu’on ne peut pas utiliser les opérateurs de comparaison ? On utilise la fonction <code>is.na()</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(age_Pierre)</code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(tailles_pop3)</code></pre></div>
<pre><code>[1] FALSE FALSE FALSE</code></pre>
<p>D’une façon générale, le point d’exclamation permet de signifier à R que nous souhaitons obtenir le contraire d’une expression :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">!</span><span class="kw">is.na</span>(age_Pierre)</code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">!</span><span class="kw">is.na</span>(tailles_pop3)</code></pre></div>
<pre><code>[1] TRUE TRUE TRUE</code></pre>
<p>Cette fonction nous sera très utile plus tard pour éliminer toutes les lignes d’un tableau contenant des valeurs manquantes.</p>
</div>
<div id="lutilisation-des-fonctions" class="section level4">
<h4><span class="header-section-number">2.2.4.3</span> L’utilisation des fonctions</h4>
<p>Dans R, les fonctions sont des objets particuliers qui permettent d’effectuer des tâches très variées. Du calcul d’une moyenne à la création d’un graphique, en passant par la réalisation d’analyses statistiques complexes ou simplement l’affichage du chemin du répertoire de travail, tout, dans R, repose sur l’utilisation de fonctions. Vous en avez déjà vu un certain nombre :</p>
<table>
<thead>
<tr class="header">
<th align="right">Fonction</th>
<th align="left">Pour quoi faire ?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><code>c()</code></td>
<td align="left">Créer des vecteurs</td>
</tr>
<tr class="even">
<td align="right"><code>class()</code></td>
<td align="left">Afficher ou modifier la classe d’un objet</td>
</tr>
<tr class="odd">
<td align="right"><code>factor()</code></td>
<td align="left">Créer des facteurs</td>
</tr>
<tr class="even">
<td align="right"><code>getwd()</code></td>
<td align="left">Afficher le chemin du répertoire de travail</td>
</tr>
<tr class="odd">
<td align="right"><code>head()</code></td>
<td align="left">Afficher les premiers éléments d’un objet</td>
</tr>
<tr class="even">
<td align="right"><code>is.na()</code></td>
<td align="left">Tester si un objet contient des valeurs manquantes</td>
</tr>
<tr class="odd">
<td align="right"><code>mean()</code></td>
<td align="left">Calculer une moyenne</td>
</tr>
<tr class="even">
<td align="right"><code>names()</code></td>
<td align="left">Afficher ou modifier le nom des éléments d’un vecteur</td>
</tr>
<tr class="odd">
<td align="right"><code>order()</code></td>
<td align="left">Ordonner les éléments d’un objet</td>
</tr>
<tr class="even">
<td align="right"><code>setwd()</code></td>
<td align="left">Modifier le chemin du répertoire de travail</td>
</tr>
<tr class="odd">
<td align="right"><code>subset()</code></td>
<td align="left">Extraire une partie des éléments d’un objet</td>
</tr>
<tr class="even">
<td align="right"><code>sum()</code></td>
<td align="left">Calculer une somme</td>
</tr>
<tr class="odd">
<td align="right"><code>tail()</code></td>
<td align="left">Afficher les derniers éléments d’un objet</td>
</tr>
</tbody>
</table>
<p>Cette liste va très rapidement s’allonger au fil des séances. Je vous conseille donc vivement de tenir à jour une liste des fonctions décrites, avec une explication de leur fonctionnement et éventuellement un exemple de syntaxe.</p>
<p>Certaines fonction ont besoin d’arguments (par exemple, la fonction <code>factor()</code>), d’autres peuvent s’en passer (par exemple, la fonction <code>getwd()</code>). Pour apprendre comment utiliser une fonction particulière, pour découvrir quels sont ses arguments possibles, quelle est leur rôle et leur intérêt, la meilleure solution est de consulter l’aide de cette fonction. Il suffit pour cela de taper un <code>?</code> suivi du nom de la fonction :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?<span class="kw">factor</span>()</code></pre></div>
<p>Toutes les fonctions et jeux de données disponibles dans R disposent d’un fichier d’aide similaire. Cela peut faire un peu peur au premier abord (tout est en anglais !), mais ces fichiers d’aide ont l’avantage d’être très complets, de fournir des exemples d’utilisation, et ils sont tous construits sur le même modèle. Vous avez donc tout intérêt à vous familiariser avec eux. vous devriez d’ailleurs prendre l’habitude de consulter l’aide de chaque fonction qui vous pose un problème. Par exemple, le logarithme (en base 10) de 100 devrait faire 2, car 100 est égal à 10^2. Pourtant :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">100</span>)</code></pre></div>
<pre><code>[1] 4.60517</code></pre>
<p>Que se passe-t’il ? Pour le savoir, il faut consulter l’aide de la fonction log :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?<span class="kw">log</span>()</code></pre></div>
<p>Ce fichier d’aide nous apprend que par défaut, la syntaxe de la fonction <code>log()</code> est la suivante :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(x, <span class="dt">base =</span> <span class="kw">exp</span>(<span class="dv">1</span>))</code></pre></div>
<p>Par défaut, la base du logarithme est fixée à <code>exp(1)</code>. Nous avons donc calculé un logarithme népérien (en base <em>e</em>). Cette fonction prend donc 2 arguments : 1. <code>x</code> ne possède pas de valeur par défaut : il nous faut obligatoirement fournir quelque chose (la rubrique “Argument” du fichier d’aide nous indique que <code>x</code> doit être un vecteur numérique ou complexe) afin que la fonction puisse calculer un logarithme 2. <code>base</code> possède un argument par défaut. Si nous ne spécifions pas nous même la valeur de <code>base</code>, elle sera fixée à sa valeur par défaut, c’est à dire <code>exp(1)</code>.</p>
<p>Pour calculer le logarithme en base 10 de 100, il faut donc taper, au choix, l’une de ces 3 expressions :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">x =</span> <span class="dv">100</span>, <span class="dt">base =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">100</span>, <span class="dt">base =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">100</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Le nom des arguments d’une fonction peut être omis tant que ces arguments sont indiqués dans l’ordre attendu par la fonction (cet ordre est celui qui est précisé à la rubrique “Usage” du fichier d’aide de la fonction). Il est possible de modifier l’ordre des arguments d’une fonction, mais il faut alors être parfaitement explicite et utiliser les noms des arguments tels que définis dans le fichier d’aide.</p>
<p>Ainsi, pour calculer le logarithme en base 10 de 100, on ne peut pas taper :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">10</span>, <span class="dv">100</span>)</code></pre></div>
<pre><code>[1] 0.5</code></pre>
<p>car cela revient à calculer le logarithme en base 100 de 10. On peut en revanche taper :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dt">base =</span> <span class="dv">10</span>, <span class="dt">x =</span> <span class="dv">100</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<hr />
</div>
</div>
</div>
<div id="packages" class="section level2">
<h2><span class="header-section-number">2.3</span> Les packages additionels</h2>
<p>Une source de confusion importante pour les nouveaux utilisateurs de R est la notion de package. Les packages étendent les fonctionnalités de R en fournissant des fonctions, des données et de la documentation supplémentaires et peuvent être téléchargés gratuitement sur Internet. Ils sont écrits par une communauté mondiale d’utilisateurs R. Par exemple, parmi plus de 13000 packages disponibles à l’heure actuelle, nous utiliseront fréquemment :</p>
<ul>
<li>Le package <code>ggplot2</code> pour la visualisation des données dans le chapitre <a href="viz.html#viz">4</a></li>
<li>Le package <code>dplyr</code> pour les manipuler des tableaux données dans le chapitre <a href="wrangling.html#wrangling">6</a></li>
</ul>
<p>Il y a deux choses importantes à retenir à propos des packages R :</p>
<ol style="list-style-type: decimal">
<li><em>Installation</em> : la plupart des packages ne sont pas installés par défaut lorsque vous installez R et RStudio. Vous devez installer un package avant de pouvoir l’utiliser. Une fois que vous l’avez installé, vous n’avez probablement pas besoin de l’installer à nouveau, sauf si vous souhaitez le mettre à jour vers une version plus récente du package.</li>
<li><em>Chargement</em> : les packages ne sont pas chargés automatiquement lorsque vous ouvrez RStudio. Vous devez les charger chaque fois que vous ouvrez RStudio en utilisant la commande <code>library ()</code>.</li>
</ol>
<p>Une bonne analogie pour les packages R : ils sont comme les apps que vous téléchargez sur un téléphone portable :</p>
<table>
<thead>
<tr class="header">
<th align="center">R : Un nouveau téléphone</th>
<th align="center">Packages: Apps qu’on peut telécharger</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><img src="images/iphone.jpg" alt="Drawing" style="height: 200px;"/></td>
<td align="center"><img src="images/apps.jpg" alt="Drawing" style="height: 200px;"/></td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>R est comme un nouveau téléphone mobile. Il est capable de faire certaines choses lorsque vous l’utilisez pour la première fois, mais il ne sait pas tout faire.</li>
<li>Les packages R sont comme les apps que vous pouvez télécharger dans l’App Store et Google Play.</li>
<li>Pour utiliser un package, comme pour utiliser Instagram, vous devez :      1. Le télécharger et l’installer. Vous ne le faites qu’une fois.      1. Le charger (en d’autres termes, l’ouvrir) en utilisant la commande <code>library ()</code>.</li>
</ol>
<p>Donc, tout comme vous ne pouvez commencer à partager des photos avec vos amis sur Instagram que si vous installez d’abord l’application et que vous l’ouvrez, vous ne pouvez accéder aux données et fonctions d’un package R que si vous installez d’abord le package et le chargez avec la fonction <code>library()</code>. Passons en revue ces 2 étapes.</p>
<div id="installation-dun-package" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Installation d’un package</h3>
<p>Il y a deux façons d’installer un package. Par example, pour installer le package <code>ggplot2</code> :</p>
<ol style="list-style-type: decimal">
<li><strong>Le plus simple</strong> : Dans le panneau “File” de Rstudio :
<ol style="list-style-type: lower-alpha">
<li>Cliquez sur l’onglet “Packages”</li>
<li>Cliquez sur “Install”</li>
<li>Tapez le nom du package dans le champ “Packages (separate multiple with space or comma):” Pour notre exemple, tapez <code>ggplot2</code></li>
<li>Cliquez “Install”</li>
</ol></li>
<li><strong>Métode alternative</strong> : Dans la console, tapez <code>install.packages(&quot;ggplot2&quot;)</code> (vous devez inclure les guillemets).</li>
</ol>
<p>En procédant de l’une ou l’autre façon, installez également les packages suivants : <code>tidyverse</code> et <code>nycfilghts13</code>.</p>
<p><strong>Note</strong> : un package doit être installé une fois seulement, sauf si une version plus récente est disponible et que vous souhaitez mettre à jour ce package.</p>
</div>
<div id="charger-un-package-en-memoire" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Charger un package en mémoire</h3>
<p>Après avoir installé un package, vous pouvez le charger en utilisant la fonction <code>library()</code>. Par exemple, pour charger <code>ggplot2</code> et <code>dplyr</code> tapez ceci dans la console :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(dplyr)</code></pre></div>
<p><strong>Note</strong> : Vous devez charger à nouveau chaque package que vous souhaitez utiliser à chaque fois que vous ouvrez une nouvelle session de travail dans RStudio. Ça peut être un peu pénible et c’est une source d’erreur fréquente pour les débutants. Quand vous vouyez un message d’erreur commençant par :</p>
<pre><code>Error: could not find function...</code></pre>
<p>rappelez-vous que c’est probablement parce que vous tentez d’utiliser une fonction qui fait partie d’un package que vous n’avez pas chargé. Pour corriger l’erreur, il suffit donc de charger le package approprié avec la commande <code>library()</code>.</p>
<hr />
</div>
</div>
<div id="exercices" class="section level2">
<h2><span class="header-section-number">2.4</span> Exercices</h2>
<p>Créez un nouveau script que vous nommerez <code>VotreNomDeFamille.R</code>. Vous prendrez soin d’ajouter autant de commentaires que nécessaire dans votre script afin de le structurer correctement.</p>
<ol style="list-style-type: decimal">
<li>Téléchargez (si besoin) et chagez le package <code>ggplot2</code></li>
<li>Chargez le jeu de données <code>diamonds</code> grâce à la commande <code>data(diamonds)</code></li>
<li>Déterminer le nombre de lignes et de colonnes de ce tableau nommé <code>diamonds</code></li>
<li>Créez un nouveau tableau que vous nommerez <code>diamonds_chers</code> qui contiendra uniquement les informations des diamands dont le prix est supérieur ou égal à $15000</li>
<li>Combien de diamands coûtent $15000 ou plus ?</li>
<li>Cela représente quelle proportion du jeu de données de départ ?</li>
<li>Triez ce tableau par ordre de prix décroissant et affichez les informations des 20 diamands les plus chers</li>
</ol>
<p>Déposez votre script sur l’ENT au moins une heure avant votre prochaine séance de travaux pratiques.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dataset.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
